<div class="modal fade" id="deadzoneModal" tabindex="-1" aria-labelledby="deadzoneModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title ds-i18n" id="deadzoneModalLabel">Configure Dead Zone</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="alert alert-info mb-3">
          <i class="fas fa-info-circle"></i>
          <span class="ds-i18n">Dead zone settings help eliminate stick drift and fine-tune input sensitivity. Inner dead zone ignores small movements, while outer dead zone defines the maximum range.</span>
        </div>

        <div class="alert alert-warning mb-3">
          <i class="fas fa-microchip"></i>
          <strong class="ds-i18n">Two Save Options:</strong><br>
          <span class="ds-i18n"><b>Software Only:</b> Works immediately in browser, does not modify controller.</span><br>
          <span class="ds-i18n"><b>Apply to Controller:</b> Writes to controller memory, then click "Save changes permanently" to make it permanent.</span>
        </div>

        <!-- Left Stick Settings -->
        <div class="mb-4">
          <h6 class="fw-bold mb-3">
            <i class="fas fa-gamepad"></i>
            <span class="ds-i18n">Left Stick</span>
          </h6>

          <div class="row align-items-center mb-3">
            <div class="col-4">
              <label for="leftInnerDeadzone" class="form-label ds-i18n">Inner Dead Zone:</label>
            </div>
            <div class="col-6">
              <input type="range" class="form-range" id="leftInnerDeadzone" min="0" max="30" step="1" value="5">
            </div>
            <div class="col-2">
              <span id="leftInnerValue" class="badge bg-secondary">5%</span>
            </div>
          </div>

          <div class="row align-items-center mb-3">
            <div class="col-4">
              <label for="leftOuterDeadzone" class="form-label ds-i18n">Outer Dead Zone:</label>
            </div>
            <div class="col-6">
              <input type="range" class="form-range" id="leftOuterDeadzone" min="70" max="100" step="1" value="95">
            </div>
            <div class="col-2">
              <span id="leftOuterValue" class="badge bg-secondary">95%</span>
            </div>
          </div>

          <!-- Left Stick Visualization -->
          <div class="text-center">
            <canvas id="leftStickDeadzoneCanvas" width="200" height="200" style="border: 1px solid #ddd; border-radius: 8px;"></canvas>
            <div class="mt-2">
              <small class="text-muted">
                <span class="ds-i18n">Current Position:</span>
                <span id="leftStickPosition" class="badge bg-info">0.00, 0.00</span>
              </small>
            </div>
          </div>
        </div>

        <hr>

        <!-- Right Stick Settings -->
        <div class="mb-4">
          <h6 class="fw-bold mb-3">
            <i class="fas fa-gamepad"></i>
            <span class="ds-i18n">Right Stick</span>
          </h6>

          <div class="row align-items-center mb-3">
            <div class="col-4">
              <label for="rightInnerDeadzone" class="form-label ds-i18n">Inner Dead Zone:</label>
            </div>
            <div class="col-6">
              <input type="range" class="form-range" id="rightInnerDeadzone" min="0" max="30" step="1" value="5">
            </div>
            <div class="col-2">
              <span id="rightInnerValue" class="badge bg-secondary">5%</span>
            </div>
          </div>

          <div class="row align-items-center mb-3">
            <div class="col-4">
              <label for="rightOuterDeadzone" class="form-label ds-i18n">Outer Dead Zone:</label>
            </div>
            <div class="col-6">
              <input type="range" class="form-range" id="rightOuterDeadzone" min="70" max="100" step="1" value="95">
            </div>
            <div class="col-2">
              <span id="rightOuterValue" class="badge bg-secondary">95%</span>
            </div>
          </div>

          <!-- Right Stick Visualization -->
          <div class="text-center">
            <canvas id="rightStickDeadzoneCanvas" width="200" height="200" style="border: 1px solid #ddd; border-radius: 8px;"></canvas>
            <div class="mt-2">
              <small class="text-muted">
                <span class="ds-i18n">Current Position:</span>
                <span id="rightStickPosition" class="badge bg-info">0.00, 0.00</span>
              </small>
            </div>
          </div>
        </div>

        <!-- Quick Presets -->
        <div class="mb-3">
          <h6 class="fw-bold mb-2 ds-i18n">Quick Presets:</h6>
          <div class="btn-group w-100" role="group">
            <button type="button" class="btn btn-outline-secondary btn-sm" id="presetDefault">
              <span class="ds-i18n">Default</span> (5% / 95%)
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" id="presetTight">
              <span class="ds-i18n">Tight</span> (10% / 90%)
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" id="presetLoose">
              <span class="ds-i18n">Loose</span> (2% / 98%)
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" id="presetCompetitive">
              <span class="ds-i18n">Competitive</span> (8% / 92%)
            </button>
          </div>
        </div>

        <!-- Apply to Both Sticks Checkbox -->
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="applyToBothSticks" checked>
          <label class="form-check-label ds-i18n" for="applyToBothSticks">
            Apply changes to both sticks
          </label>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <span class="ds-i18n">Cancel</span>
        </button>
        <button type="button" class="btn btn-success" id="applyDeadzoneToController">
          <i class="fas fa-microchip"></i>
          <span class="ds-i18n">Apply to Controller (Permanent)</span>
        </button>
        <button type="button" class="btn btn-primary" id="saveDeadzoneSettings">
          <i class="fas fa-save"></i>
          <span class="ds-i18n">Save Settings (Software Only)</span>
        </button>
      </div>
    </div>
  </div>
</div>
